<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">

<head>
    <title>ì „êµ­ ì¶•ì œ ëª©ë¡</title>

<style>
/* -------------------------------
   ì˜¤ë Œì§€ í…Œë§ˆ ê³µí†µ ìŠ¤íƒ€ì¼
-------------------------------- */
:root {
    --orange-main: #FF7732;
    --orange-dark: #e16322;
    --orange-light: #ffa875;
}

/* ê½‰ ì°¬ ì˜¤ë Œì§€ ë²„íŠ¼ */
.btn-orange {
    background-color: var(--orange-main);
    border-color: var(--orange-main);
    color: white;
    font-weight: 600;
}
.btn-orange:hover {
    background-color: var(--orange-dark);
    border-color: var(--orange-dark);
}

/* ì˜¤ë Œì§€ ì•„ì›ƒë¼ì¸ ë²„íŠ¼ */
.btn-outline-orange {
    color: var(--orange-main);
    border-color: var(--orange-main);
    font-weight: 600;
}
.btn-outline-orange:hover,
.btn-outline-orange.active {
    background-color: var(--orange-main);
    color: white;
}

/* ì´ˆê¸°í™” ë²„íŠ¼ â†’ ì˜¤ë Œì§€ ê¸°ë°˜ */
.btn-outline-secondary {
    border-color: var(--orange-main) !important;
    color: var(--orange-main) !important;
    font-weight: 600;
}
.btn-outline-secondary:hover {
    background-color: var(--orange-main) !important;
    color: white !important;
}

/* -----------------------------------
   ê´€ë¦¬ì ì „ìš© íšŒìƒ‰ ë²„íŠ¼ ìŠ¤íƒ€ì¼
----------------------------------- */
.btn-admin-gray {
    background-color: #e0e0e0;   /* ì—°í•œ íšŒìƒ‰ */
    border-color: #bdbdbd;       /* ì¤‘ê°„ íšŒìƒ‰ */
    color: #333;                 /* ì§„í•œ ê¸€ì”¨ */
    font-weight: 600;
    padding: 8px 18px;
    border-radius: 6px;
}

.btn-admin-gray:hover {
    background-color: #bdbdbd;    /* hover ì‹œ ì¡°ê¸ˆ ë” ì§„í•œ íšŒìƒ‰ */
    border-color: #9e9e9e;
    color: #111;
}

/* -------------------------------
   í•„í„° ë°•ìŠ¤ ë””ìì¸
-------------------------------- */
.filter-box {
    border: 1px solid #ddd;
    border-radius: 6px;
    padding: 20px;
    margin-bottom: 20px;
    background: white;
}

/* í•„í„° ë°•ìŠ¤ ë‚´ë¶€ ë‚´ìš© ì¤‘ì•™ ì •ë ¬ */
.filter-box .row {
  align-items: center;
  justify-content: center; /* ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
}


/* -------------------------------
   ì •ë ¬ ì˜ì—­ (í…Œë‘ë¦¬ ë°–)
-------------------------------- */
.sort-box {
    margin-top: -5px;
    margin-bottom: 20px;
    display: flex;
    justify-content: flex-end;
    align-items: center;
}
.sort-box .btn {
    margin-left: 8px;
}

</style>
</head>

<body>
<div layout:fragment="content" class="container my-5">
    
    <form th:action="@{/festivals/list}" method="get" id="filterForm">
        
        <div class="filter-section p-4 mb-4 border rounded">
            <div class="row g-3 mb-3 align-items-center">

                <div class="col-md-4">
                    <select id="regionFilter" class="form-select" name="region">
                        <option value="">ì§€ì—­</option>
                    <option value="ì„œìš¸">ì„œìš¸</option>
                    <option value="ê²½ê¸°ë„">ê²½ê¸°ë„</option>
                    <option value="ì¸ì²œ">ì¸ì²œ</option>
                    <option value="ëŒ€ì „">ëŒ€ì „</option>
                    <option value="ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ">ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ</option>
                    <option value="ëŒ€êµ¬">ëŒ€êµ¬</option>
                    <option value="ê´‘êµ¬">ê´‘êµ¬</option>
                    <option value="ë¶€ì‚°">ë¶€ì‚°</option>
                    <option value="ìš¸ì‚°">ìš¸ì‚°</option>
                    <option value="ê°•ì›íŠ¹ë³„ìì¹˜ë„">ê°•ì›íŠ¹ë³„ìì¹˜ë„</option>
                    <option value="ì¶©ì²­ë‚¨ë„">ì¶©ì²­ë‚¨ë„</option>
                    <option value="ì¶©ì²­ë¶ë„">ì¶©ì²­ë¶ë„</option>
                    <option value="ê²½ìƒë¶ë„">ê²½ìƒë¶ë„</option>
                    <option value="ê²½ìƒë‚¨ë„">ê²½ìƒë‚¨ë„</option>
                    <option value="ì „ë¶íŠ¹ë³„ìì¹˜ë„">ì „ë¶íŠ¹ë³„ìì¹˜ë„</option>
                    <option value="ì „ë¼ë„">ì „ë¼ë„</option>
                    <option value="ì œì£¼íŠ¹ë³„ìì¹˜ë„">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
                </select>
            </div>

            <div class="col-md-4">
                <select id="categoryFilter" class="form-select">
                    <option value="">ì¹´í…Œê³ ë¦¬</option>
                    <option value="ê³„ì ˆ">ê³„ì ˆ</option>
                    <option value="ë¨¹ê±°ë¦¬">ë¨¹ê±°ë¦¬</option>
                    <option value="íë§">íë§</option>
                    <option value="ë¶ˆê½ƒë†€ì´">ë¶ˆê½ƒë†€ì´</option>
                    <option value="ë¬¸í™”ì˜ˆìˆ ">ë¬¸í™”ì˜ˆìˆ </option>
                    <option value="ì²´í—˜">ì²´í—˜</option>
                </select>
            </div>

            <div class="col-md-auto">
                <button id="resetFilters" class="btn btn-outline-secondary">ì´ˆê¸°í™”</button>
            </div>

            <div class="col-md-auto">
                <button id="searchButton" class="btn btn-orange">ê²€ìƒ‰</button>
            </div>
           <div class="col-md-auto" sec:authorize="authentication.name == 'wcadmin'">
    <button type="button" class="btn btn-admin-gray"
            onclick="location.href='/travel/create'">ë“±ë¡</button>
</div>

<div class="col-md-auto" sec:authorize="authentication.name == 'wcadmin'">
    <button type="button" class="btn btn-admin-gray"
            onclick="location.href='/travel/list'">ì¡°íšŒ</button>
</div>

        </div>
    </div>
    
    <h3 class="text-success mb-3">ê²€ìƒ‰ ê²°ê³¼</h3>
    
   <div class="container mt-3">
    <table class="table table-borderless">
        <tr class="d-flex flex-wrap">
            <td th:each="travel : ${travelList}" class="p-2 col-md-3">
                <div class="card h-100" style="width: 15rem;">
                    <img th:src="${travel.filePath}"
                         style="width: 100%; height: 300px; object-fit: cover;" class="card-img-top" alt="ì¶•ì œ ì´ë¯¸ì§€">
                    
                    <!-- ğŸ‘‡ ì¹´ë“œ ë³¸ë¬¸ ìˆ˜ì • ì‹œì‘ ğŸ‘‡ -->
                    <div class="card-body">
                        
                        <!-- 1. ì²« ì¤„: ì¶•ì œ ì´ë¦„ (ë‘êº¼ìš´ ê¸€ì”¨) ë° ìƒì„¸ í˜ì´ì§€ ë§í¬ -->
                        <h5 class="card-title fw-bold mb-1">
                            <a th:href="@{|/travel/detail/${travel.id}|}"
                               th:text="${travel.subject}" class="text-decoration-none text-dark"></a>
                        </h5>

                        <!-- 2. ë‘ ë²ˆì§¸ ì¤„: ê¸°ê°„ (travelInfo_day) -->
                        <div class="card-text small text-secondary mb-1" th:if="${travel.travelInfo_day != null}">
                            ê¸°ê°„: <span th:text="${travel.travelInfo_day}"></span>
                        </div>
                        
                        <!-- 3. ì„¸ ë²ˆì§¸ ì¤„: ì¥ì†Œ (travelInfo_place) -->
                        <div class="card-text small text-secondary mb-3" th:if="${travel.place != null}">
                            ì¥ì†Œ: <span th:text="${travel.place}"></span>
                        </div>
                        
                        <!-- 4. ë§ˆì§€ë§‰ ì¤„: ì¶”ì²œìˆ˜ -->
                        <div class="small text-muted border-top pt-2">
                            ì¶”ì²œìˆ˜ : <span th:text="${#sets.size(travel.voter)}">0</span>
                        </div>
                        
                    </div>
                    <!-- ğŸ‘† ì¹´ë“œ ë³¸ë¬¸ ìˆ˜ì • ë ğŸ‘† -->
                </div>
            </td>
        </tr>
            <tr th:if="${#lists.isEmpty(travelList)}">
                <td colspan="4">ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ì¶•ì œê°€ ì—†ìŠµë‹ˆë‹¤.</td>
            </tr>
        </table>
    </div>
    </div>

<script>

$(document).ready(function () {
    
    $('#searchButton').on('click', function() {
        // ì‹¤ì œë¡œëŠ” í¼ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì—¬ ì„œë²„ë¡œ ì „ì†¡í•˜ëŠ” ë¡œì§ì´ ì—¬ê¸°ì— ë“¤ì–´ì™€ì•¼ í•©ë‹ˆë‹¤.
        alert('ê²€ìƒ‰ ê¸°ëŠ¥ì€ í˜„ì¬ ì„œë²„ ì—°ë™ ì „ì´ë¯€ë¡œ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    });

    $('#resetFilters').on('click', () => {
        $('#regionFilter').val('');
        $('#categoryFilter').val('');
        // ì‹¤ì œë¡œëŠ” í•„í„° ì´ˆê¸°í™” í›„ ì„œë²„ë¡œ ì¬ìš”ì²­í•˜ëŠ” ë¡œì§ì´ ì—¬ê¸°ì— ë“¤ì–´ì™€ì•¼ í•©ë‹ˆë‹¤.
        // í˜„ì¬ëŠ” í•„í„° ê°’ë§Œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.
    });

    $('.sort-box button').on('click', function () {
        $('.sort-box button').removeClass('active');
        $(this).addClass('active');
        // currentSort = $(this).data('sort'); // ì´ ë¡œì§ë„ ì„œë²„ ì—°ë™ ì‹œ í•„ìš” ì—†ìŒ
        alert('ì •ë ¬ ê¸°ëŠ¥ì€ í˜„ì¬ ì„œë²„ ì—°ë™ ì „ì´ë¯€ë¡œ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    });
    
 // 2. ì´ˆê¸°í™” ë²„íŠ¼ í´ë¦­ ì‹œ ë™ì‘ (ì¹´í…Œê³ ë¦¬/ì§€ì—­ í•„í„°ë¥¼ ë¹„ìš°ê³  í¼ ì œì¶œ)
    $('#resetFilters').on('click', () => {
        $('#regionFilter').val('');
        $('#categoryFilter').val('');
        
        // í¼ ì œì¶œ (í•„í„°ê°€ ë¹„ì›Œì§„ ìƒíƒœë¡œ ì„œë²„ì— ì¬ìš”ì²­)
        $('#filterForm').submit();
    });
    
    // 3. ê²€ìƒ‰ ë²„íŠ¼ì€ type="submit"ìœ¼ë¡œ ë³€ê²½í–ˆê¸° ë•Œë¬¸ì— ë³„ë„ JS í•„ìš” ì—†ìŒ.
    // 4. ì •ë ¬ ë²„íŠ¼ì€ í˜„ì¬ ì„œë²„ ì—°ë™ì´ ì•ˆ ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ê²½ê³  ë©”ì‹œì§€ëŠ” ì‚­ì œí•˜ê³ , í˜„ì¬ ìƒíƒœë¡œ ìœ ì§€í•©ë‹ˆë‹¤.
    $('.sort-box button').on('click', function () {
        $('.sort-box button').removeClass('active');
        $(this).addClass('active');
        // TODO: í–¥í›„ ì •ë ¬ ê¸°ì¤€ ê°’ì„ hidden inputì— ì €ì¥í•˜ê³  í¼ ì œì¶œí•˜ë„ë¡ ìˆ˜ì • í•„ìš”
        alert('ì •ë ¬ ê¸°ëŠ¥ì€ ì•„ì§ ì„œë²„ì™€ ì—°ë™ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
    });

});
</script>

</body>
</html>
