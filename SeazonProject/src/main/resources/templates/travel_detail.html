<html layout:decorate="~{layout}">
<div layout:fragment="content" class="container my-5">

   <!-- Ï∂ïÏ†ú Ï†úÎ™© + ÏàòÏ†ï/ÏÇ≠Ï†ú Î≤ÑÌäº (Ïò§Î•∏Ï™Ω) -->
<div class="d-flex justify-content-between align-items-center mb-4">

    <!-- Ï†úÎ™© -->
    <h2 class="fw-bold m-0" th:text="${travel.subject}"></h2>

    <!-- ÏàòÏ†ï/ÏÇ≠Ï†ú Î≤ÑÌäº -->
    <div>

        <!-- ÏàòÏ†ï Î≤ÑÌäº -->
        <a th:href="@{|/travel/modify/${travel.id}|}"
           class="btn btn-warning btn-sm me-2"
           sec:authorize="isAuthenticated()"
           th:if="${travel.author != null and #authentication.getPrincipal().getUsername() == travel.author.username}">
            ÏàòÏ†ï
        </a>

        <!-- ÏÇ≠Ï†ú Î≤ÑÌäº -->
       <a th:href="@{|/travel/delete/${travel.id}|}"
   class="btn btn-danger btn-sm"
   sec:authorize="isAuthenticated()"
   th:if="${travel.author != null and #authentication.getPrincipal().getUsername() == travel.author.username}">
    ÏÇ≠Ï†ú
</a>
    </div>
</div>

  <!-- Ï∂ïÏ†ú ÏÑ§Î™Ö (ÏúóÎ∂ÄÎ∂Ñ ÌÅ¨Í≤å ÎÖ∏Ï∂ú) -->
  <p class="text-secondary fs-5" 
   style="white-space: pre-line;"
   th:text="${travel.travelIntro}">
</p>

    <hr class="my-4">

    <!-- =============== ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ + Ï†ïÎ≥¥ ÏïÑÏù¥ÏΩò Î¶¨Ïä§Ìä∏ =============== -->
    <div class="row mt-4">

        <!-- ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ (ÏôºÏ™Ω) -->
        <div class="col-md-6 text-center">
            <img th:src="${travel.filePath}"
                 alt="ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"
                 class="img-fluid rounded shadow"
                 style="max-height: 480px; object-fit: cover;">
        </div>

        <!-- Ï†ïÎ≥¥ Î¶¨Ïä§Ìä∏ (Ïò§Î•∏Ï™Ω) -->
        <div class="col-md-6 mt-4 mt-md-0">

            <!-- ÏùºÏ†ï -->
            <div class="d-flex align-items-center mb-3">
                <img src="/image/free-icon-calendar-check-7955802.png" style="width:40px; height:40px;" class="me-3">
                <div class="fs-5 fw-bold" th:text="${travel.travelInfo_day}"></div>
            </div>

            <!-- Ï£ºÏÜå -->
            <div class="d-flex align-items-center mb-3">
                <img src="/image/free-icon-location-535239.png" style="width:40px; height:40px;" class="me-3">
                <div class="fs-5" th:text="${travel.travelInfo_place}"></div>
            </div>

            <!-- ÎπÑÏö© -->
            <div class="d-flex align-items-center mb-3">
                <img src="/image/free-icon-won-4789956.png" style="width:40px; height:40px;" class="me-3">
                <div class="fs-5" th:text="${travel.travelInfo_pay}"></div>
            </div>

            <!-- Ï£ºÏµú -->
            <div class="d-flex align-items-center mb-3">
                <img src="/image/free-icon-commitment-7178922.png" style="width:40px; height:40px;" class="me-3">
                <div class="fs-5" th:text="${travel.travelInfo_organizer}"></div>
            </div>

            <!-- Ï†ÑÌôîÎ≤àÌò∏ -->
            <div class="d-flex align-items-center mb-3">
                <img src="/image/free-icon-telephone-3095602.png" style="width:40px; height:40px;" class="me-3">
                <div class="fs-5" th:text="${travel.travelInfo_phone}"></div>
            </div>

            <!-- Í≥µÏãù ÌôàÌéòÏù¥ÏßÄ Î≤ÑÌäº -->
            <div class="mt-4">
              <a class="btn btn-outline-dark px-4 py-2 fs-5"
   th:href="'https://' + ${travel.travelInfo_homepage}"
   target="_blank"
   style="border-radius: 12px;">
    Í≥µÏãù ÌôàÌéòÏù¥ÏßÄ üîó
</a>
            </div>

        </div>
    </div>

    <hr class="my-5">

    <!-- ========== Ï∂îÏ≤ú / ÏàòÏ†ï / ÏÇ≠Ï†ú Î≤ÑÌäº ========== -->
    <div class="text-end mb-3">

        <!-- Ï∂îÏ≤ú Î≤ÑÌäº -->
        <a class="recommend btn btn-danger btn-sm"
           th:data-uri="@{|/travel/vote/${travel.id}|}">
            Ï∂îÏ≤ú
            <span class="badge bg-white text-danger"
                  th:text="${#lists.size(travel.voter)}"></span>
        </a>

        <!-- ÏàòÏ†ï Î≤ÑÌäº -->
        <a th:href="@{|/travel/modify/${travel.id}|}"
           class="btn btn-warning btn-sm"
           sec:authorize="isAuthenticated()"
           th:if="${travel.author != null and #authentication.getPrincipal().getUsername() == travel.author.username}">
            ÏàòÏ†ï
        </a>

        <!-- ÏÇ≠Ï†ú Î≤ÑÌäº -->
        <a th:data-uri="@{|/travel/delete/${travel.id}|}"
           class="delete btn btn-warning btn-sm"
           sec:authorize="isAuthenticated()"
           th:if="${travel.author != null and #authentication.getPrincipal().getUsername() == travel.author.username}">
           ÏÇ≠Ï†ú
        </a>
    </div>

    <hr class="my-4">

    <!-- ========== ÏïÑÎûòÎäî Í∏∞Ï°¥ ÎãµÎ≥Ä ÏòÅÏó≠ Í∑∏ÎåÄÎ°ú Ïú†ÏßÄ ========== -->
    <h5 class="border-bottom my-3 py-2"
        th:text="|${#lists.size(travel.answerList)}Í∞úÏùò ÎãµÎ≥ÄÏù¥ ÏûàÏäµÎãàÎã§.|"></h5>

    <div class="card my-3" th:each="answer : ${travel.answerList}">
        <a th:id="|answer_${answer.id}|"></a>
        <div class="card-body">

            <div class="card-text" th:utext="${@commonUtil.markdown(answer.content)}"></div>
            <div class="d-flex justify-content-end">
                <div class="badge bg-light text-dark p-2 text-start mx-3" 
                     th:if="${answer.modifyDate != null}">
                    <div class="mb-2">ÏàòÏ†ïÎê®</div>
                    <div th:text="${#temporals.format(answer.modifyDate, 'yyyy-MM-dd HH:mm')}"></div>
                </div>

                <div class="badge bg-light text-dark p-2 text-start">
                    <div class="mb-2">ÏûëÏÑ±Ïûê :
                        <span th:if="${answer.author != null}" th:text="${answer.author.username}"></span>
                    </div>
                    <div th:text="${#temporals.format(answer.createDate, 'yyyy-MM-dd HH:mm')}"></div>
                </div>
            </div>

            <div class="my-3">
                <a class="recommend btn btn-sm btn-outline-secondary"
                   th:data-uri="@{|/answer/vote/${answer.id}|}">
                    Ï∂îÏ≤ú
                    <span class="badge rounded-pill bg-success"
                          th:text="${#lists.size(answer.voter)}"></span>
                </a>

                <a th:href="@{|/answer/modify/${answer.id}|}"
                   class="btn btn-sm btn-outline-warning"
                   sec:authorize="isAuthenticated()"
                   th:if="${answer.author != null && #authentication.getPrincipal().getUsername() == answer.author.username}">
                    ÏàòÏ†ï
                </a>

                <a th:data-uri="@{|/answer/delete/${answer.id}|}"
                   class="delete btn btn-sm btn-outline-warning"
                   sec:authorize="isAuthenticated()"
                   th:if="${answer.author != null && #authentication.getPrincipal().getUsername() == answer.author.username}">
                   ÏÇ≠Ï†ú
                </a>
            </div>

        </div>
    </div>

    <!-- ÎãµÎ≥Ä ÏûëÏÑ± -->
    <form th:action="@{|/answer/create/${travel.id}|}"
          th:object="${answerForm}"
          method="post" class="my-3">
        <div th:replace="form_errors :: formErrorsFragment"></div>
        <textarea th:field="*{content}" class="form-control" rows="10"
                  sec:authorize="isAnonymous()" disabled></textarea>

        <textarea th:field="*{content}" class="form-control" rows="10"
                  sec:authorize="isAuthenticated()"></textarea>

        <input type="submit" value="ÎãµÎ≥ÄÎì±Î°ù" class="btn btn-warning my-2">
    </form>

</div>
</html>
