<!DOCTYPE html>
<html layout:decorate="~{layout}">

<!-- ============================= -->
<!-- ✔ CSS 영역 (layout에 삽입됨) -->
<!-- ============================= -->
<th:block layout:fragment="css">

    <!-- flatpickr 달력 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }

        .form-control, .form-select {
            border-radius: 8px;
            height: 45px;
        }

        /* 오렌지 테마 */
        .btn-warning, .btn-secondary {
            background-color: #FF7732 !important;
            border-color: #FF7732 !important;
            color: white !important;
            font-weight: 600;
        }

        .btn-warning:hover,
        .btn-secondary:hover {
            opacity: 0.85;
        }
    </style>

</th:block>



<!-- ============================= -->
<!-- ✔ 실제 화면 내용 -->
<!-- ============================= -->
<th:block layout:fragment="content">

<div class="container my-5">

    <h2 class="border-bottom pb-3">축제 등록</h2>

    <form th:object="${travelForm}" method="post" enctype="multipart/form-data" class="mt-4">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

        <table class="table table-borderless">

            <!-- 축제 이름 -->
            <tr>
                <td class="text-end align-middle" style="width:150px;">축제 이름*</td>
                <td><input type="text" th:field="*{subject}" placeholder="축제 이름을 입력하세요" class="form-control"/></td>
            </tr>

            <!-- 축제 설명 -->
            <tr>
                <td class="text-end align-middle">축제 설명*</td>
                <td><textarea th:field="*{travelIntro}" class="form-control" placeholder="축제 설명을 입력하세요"></textarea></td>
            </tr>

            <!-- 지역 / 카테고리 -->
            <tr>
                <td class="text-end align-middle">카테고리*</td>
                <td>
                    <div class="d-flex gap-2">

                        <!-- 지역 -->
                        <select class="form-select" th:field="*{category}">
                           <option value="">지역 선택</option>
                           <option value="서울">서울</option>
                           <option value="경기도">경기도</option>
                           <option value="인천">인천</option>
                           <option value="대전">대전</option>
                           <option value="세종특별자치시">세종특별자치시</option>
                           <option value="대구">대구</option>
                           <option value="광주">광주</option>
                           <option value="부산">부산</option>
                           <option value="울산">울산</option>
                           <option value="강원특별자치도">강원특별자치도</option>
                           <option value="충청남도">충청남도</option>
                           <option value="충청북도">충청북도</option>
                           <option value="경상북도">경상북도</option>
                           <option value="경상남도">경상남도</option>
                           <option value="전북특별자치도">전북특별자치도</option>
                           <option value="전라도">전라도</option>
                           <option value="제주특별자치도">제주특별자치도</option>
                        </select>

                        <!-- 카테고리 -->
                        <select class="form-select" th:field="*{category}">
                           <option value="">카테고리 선택</option>
                           <option value="계절">계절</option>
                           <option value="먹거리">먹거리</option>
                           <option value="힐링">힐링</option>
                           <option value="불꽃놀이">불꽃놀이</option>
                           <option value="문화예술">문화예술</option>
                           <option value="체험">체험</option>
                        </select>

                    </div>
                </td>
            </tr>

            <!-- 일정 -->
            <tr>
                <td class="text-end align-middle">축제 일정*</td>
                <td>
                    <input type="text" id="travelInfo_day" th:field="*{travelInfo_day}" 
                           class="form-control" placeholder="예: 2025.05.01 ~ 2025.05.20">
                </td>
            </tr>

            <!-- 축제 장소 -->
            <tr>
                <td class="text-end align-middle">축제 장소*</td>
                <td>
                    <div class="input-group">
                        <input type="text" id="travelInfo_place" th:field="*{travelInfo_place}" 
                               class="form-control" placeholder="주소를 입력하세요">
                        <button type="button" class="btn btn-secondary" onclick="execDaumPostcode()">주소찾기</button>
                    </div>
                </td>
            </tr>
            
               <!-- 비용 -->
            <tr>
                <td class="text-end align-middle">비용</td>
                <td><input type="text" th:field="*{travelInfo_pay}" placeholder="참가비용 입력" class="form-control"/></td>
            </tr>

            <!-- 전화번호 -->
            <tr>
                <td class="text-end align-middle">전화번호</td>
                <td><input type="text" th:field="*{travelInfo_phone}" placeholder="전화번호 입력" class="form-control"/></td>
            </tr>

            <!-- 주최측 -->
            <tr>
                <td class="text-end align-middle">주최측</td>
                <td><input type="text" th:field="*{travelInfo_organizer}" placeholder="주최측 입력" class="form-control"/></td>
            </tr>

            <!-- 홈페이지 -->
            <tr>
                <td class="text-end align-middle">홈페이지</td>
                <td><input type="text" th:field="*{travelInfo_homepage}" placeholder="홈페이지 주소 입력" class="form-control"/></td>
            </tr>

            <!-- 대표 이미지 -->
            <tr>
                <td class="text-end align-middle">대표 이미지*</td>
                <td>
                    <input type="file" th:field="*{file}" class="form-control" onchange="previewMain(event)" />
                    <img id="mainPreview" style="width:300px; margin-top:10px; display:none;" />
                </td>
            </tr>

        </table>

        <div class="text-center mt-4">
            <button class="btn btn-warning btn-lg">저장하기</button>
        </div>

    </form>

</div>

</th:block>



<!-- ============================= -->
<!-- ✔ JS 영역 (layout에 삽입됨) -->
<!-- ============================= -->
<th:block layout:fragment="script">

<!-- 주소 API -->
<script>
function execDaumPostcode() {
    new daum.Postcode({
        oncomplete: function(data) {
            document.getElementById("travelInfo_place").value = data.address;
        }
    }).open();
}
</script>

<!-- 대표 이미지 미리보기 -->
<script>
function previewMain(event) {
    const img = document.getElementById("mainPreview");
    img.style.display = "block";
    img.src = URL.createObjectURL(event.target.files[0]);
}
</script>

<!-- flatpickr 달력 -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://npmcdn.com/flatpickr/dist/l10n/ko.js"></script>

<script>
flatpickr("#travelInfo_day", {
    mode: "range",
    dateFormat: "Y.m.d",
    locale: "ko",
});
</script>

</th:block>

</html>
